## AdminService
 - sendOfferInfo($request)  
Описание: отправляет в канал администратора информацию по офферу  
Параметры:  
$request - содержит id оффера {offer_id}  
$offer - получаемый объект оффера по id из $request  
$offerSubsList - список подписок по офферу  
$sub - подписка из списка $offerSubList  
$user - пользователь подписки  
$userOfferIncome - доход юзера от подписики  
$offerUserInfo[] - массив для отправки в admin.js:
    - 'user_name' - имя пользователя $user
    - 'user_id' - id пользователя $user
    - 'user_income' - $userOfferIncome 
    - 'user_roles' - роли пользователя $user
    - 'user_personalURL' - персональная ссылка подписки пользователя
    - 'is_active' - состояние подписки  

 - sendUserInfo($request)  
Описание: отправляет в канал администратора подписки и офферы определенного пользователя  
Параметры:  
$request - содержит имя пользователя {user_name}    
$user - нйденный объект пользователя  
$userSubs - подписки пользователя  
$userOffers - офферы пользователя  
$subInfo[] - массив для отправки в admin.js  
    - 'user_name' - имя пользователя $user
    - 'user_id' - id пользователя $user
    - 'user_income' - доход юзера от всех подписок
    - 'user_roles' - роли пользователя $user
    - 'user_transactions' - количество переходов пользователя
    - 'sub_data' - массив с данными для каждой подписке
        - 'offer_title' - название оффера 
        - 'offer_id' - id оффера
        - 'offer_creator' - имя создателя оффера
        - 'user_personalURL' - персональная ссылка подписчика
        - 'is_active' - состояние активности подписки
        - 'sub_income' - доход от подписки
        - 'sub_transactions' - количество переходов по подписке
    - 'offer_data' - массив с данными по каждому офферу пользователя
        - 'is_active' - состояние оффера 
        - 'offer_id' - id оффера
        - 'offer_title' - название оффера
        - 'offer_URL' - целевая ссылка оффера
        - 'offer_price' - стоимость перехода оффера
        - 'offer_subs' - количество подписок по офферу  
        - 'offer_loss' - расход по офферу

 - updateUserRoles($request)  
Описание: отключает зарзрешения/роли пользователя и назначает нововые новые 
Параметры:  
$request - содержит id пользователя и роли {user_id, user_roles}  
$user - объект найденного пользователя  

 - assignRole($user, $roleName)  
Описание:  назначает роли и разрешения пользователя  
Параметры:  
$role - объект роли 
$user - объект пользователя  
$permissions - разрешения для роли  

 - sendOfferErrors($request)  
Описание: отправляет в канал администратора ошибки переходов по офферу  
Параметры:  
$request - содержит id оффера {offer_id}  
$offer  - объект найденного оффера  
$subs - подписки оффера  
$badTransactions[] - массив с ошибками переходов по каждой подписке  
    - 'sub_id' - id подписки
    - 'webmaster' - имя подписанного пользователя
    - 'errors' - записи по ошибкам (id подписки, ip клиента, время) 


## DispatchService
- AdminChannelSend($data)  
Описание: отправляет в админский канал данные  
- AUserChannelSend($userId, $data)  
Описание: отправляет в частый канал пользователя данные  
- OfferStatusChannelSend($data)  
Описание: отправляет в общий канал данные  
- createResponse($type, $data)  
Описание: возвращает структуру для отправки на клиент  данных

## OfferService
- updateOfferStatus($requestData)  
Описание: отправляет в общий канал и канал подписчика оффера состояние его активности   
Параметры:  
$requestData - содержит id оффера и его состояние {offer_id, is_active}  
$offer - объект найденного оффера  
$offerSubs - активные подписки оффера  
$offerStatus[] - массив для отправки в общий канал
    - 'offer_id' - id оффера
    - 'is_active' - состояние оффера
    - 'price' - стоимость перехода оффера
    - 'creator' - имя создателя оффера
    - 'title' - наименование оффера
    - 'URL' - целевая ссылка оффера  
 $data[] - массив для отправки в частный канал пользователя 
    - 'offer_id' - id оффера
    - 'user_link' - персональная ссылка подписчика
    - 'offer_active' - состояние оффера  
- createOffer($request)
Описание: создает запись нового оффера  
Параметры:  
$request - содержит название, ссылку и стоимость оффера {title, url, price}
$data - массив для отправки в админский канал
    - 'offer_id' - id оффера
    - 'price' - стоимость перехода оффера
    - 'creator' - имя создателя оффера
    - 'title' - название оффера
    - 'URL' - целевая ссылка оффера
## SubService
 - subscribe($request)
Описание: обновляет статус подписки или создает новую запись. Затем отправляет в общий канал состояние подписки, и в частный канал информацию о  подписке  
 - unsubscribe($request)
 Описание: изменяет состояние подписки и отправляет информацию в общий канал

## UserService
- newUserRole($user)  
Описание: добавляет новому пользователю роли и разрешения  
$user - объект пользователя 
- adminRole($user)
Описание:назначает права администратора  
